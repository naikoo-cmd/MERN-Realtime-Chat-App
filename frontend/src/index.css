/* stylelint-disable-next-line at-rule-no-unknown */
@tailwind base;
/* stylelint-disable-next-line at-rule-no-unknown */
@tailwind components;
/* stylelint-disable-next-line at-rule-no-unknown */
@tailwind utilities;

@layer components {
  /* Ensure chat container uses full available height */
  .chat-root {
    display: flex;
    flex-direction: column;
    height: 100%;
    box-sizing: border-box;
  }

  /* Message bubble constraints */
  .chat-bubble {
    word-break: break-word;
    overflow-wrap: break-word;
    box-sizing: border-box;
  }

  /* Avatar constraints */
  .chat-image {
    flex-shrink: 0;
  }

  /* Ensure images in messages don't overflow */
  .chat-bubble img {
    max-width: 100%;
    height: auto;
    display: block;
  }
}

/* Smooth Animation Utilities */
@layer utilities {
  /* Fade in animation */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Slide up animation */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Slide down animation */
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Slide in message animation */
  @keyframes slideInMessage {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Theme item animation */
  @keyframes themeItemAppear {
    from {
      opacity: 0;
      transform: scale(0.8);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Preview message animation */
  @keyframes previewMessage {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Animation classes */
  .animate-fade-in {
    animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  .animate-slide-up {
    animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  .animate-slide-down {
    animation: slideDown 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  .animate-slide-in-message {
    animation: slideInMessage 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    opacity: 0;
  }

  .animate-theme-item {
    animation: themeItemAppear 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    opacity: 0;
  }

  .animate-preview-message {
    animation: previewMessage 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    opacity: 0;
  }

  /* Staggered animation delays */
  .animate-fade-in-delay {
    animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    opacity: 0;
  }

  .animate-fade-in-delay-1 {
    animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.1s forwards;
    opacity: 0;
  }

  .animate-fade-in-delay-2 {
    animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.2s forwards;
    opacity: 0;
  }

  .animate-fade-in-delay-3 {
    animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;
    opacity: 0;
  }

  .animate-fade-in-delay-4 {
    animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.4s forwards;
    opacity: 0;
  }

  .animate-fade-in-delay-5 {
    animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.5s forwards;
    opacity: 0;
  }

  .animate-fade-in-delay-6 {
    animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.6s forwards;
    opacity: 0;
  }

  /* Smooth transitions for all interactive elements */
  input:focus,
  button:hover,
  a:hover {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Prevent layout shift during animations */
  .animate-fade-in,
  .animate-slide-up,
  .animate-slide-down,
  .animate-slide-in-message,
  .animate-theme-item,
  .animate-preview-message,
  .animate-fade-in-delay,
  .animate-fade-in-delay-1,
  .animate-fade-in-delay-2,
  .animate-fade-in-delay-3,
  .animate-fade-in-delay-4,
  .animate-fade-in-delay-5,
  .animate-fade-in-delay-6 {
    will-change: transform, opacity;
  }
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .animate-slide-up,
  .animate-slide-down,
  .animate-slide-in-message,
  .animate-theme-item,
  .animate-preview-message,
  .animate-fade-in-delay-1,
  .animate-fade-in-delay-2,
  .animate-fade-in-delay-3,
  .animate-fade-in-delay-4,
  .animate-fade-in-delay-5,
  .animate-fade-in-delay-6 {
    animation-duration: 0.4s;
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
